# æµ‹è¯•æ–‡ä»¶ç»“æ„

æœ¬é¡¹ç›®é‡‡ç”¨åˆ†å±‚æµ‹è¯•æ¶æ„ï¼Œå°†æµ‹è¯•æ–‡ä»¶æŒ‰ç±»å‹å’Œç”¨é€”è¿›è¡Œåˆ†ç±»ç®¡ç†ã€‚

## ğŸ“ ç›®å½•ç»“æ„

```
tests/
â”œâ”€â”€ unit/           # å•å…ƒæµ‹è¯• (Jest)
â”œâ”€â”€ integration/    # é›†æˆæµ‹è¯• (Jest)
â”œâ”€â”€ manual/         # æ‰‹åŠ¨æµ‹è¯•è„šæœ¬
â”œâ”€â”€ scripts/        # æµ‹è¯•å·¥å…·è„šæœ¬
â””â”€â”€ README.md       # æœ¬æ–‡æ¡£
```

## ğŸ§ª æµ‹è¯•ç±»å‹

### 1. å•å…ƒæµ‹è¯• (`tests/unit/`)
- **ç”¨é€”**: æµ‹è¯•å•ä¸ªå‡½æ•°ã€ç±»æˆ–æ¨¡å—çš„åŠŸèƒ½
- **å·¥å…·**: Jest
- **ç‰¹ç‚¹**: å¿«é€Ÿã€ç‹¬ç«‹ã€å¯é‡å¤
- **è¿è¡Œ**: `npm run test:unit`

### 2. é›†æˆæµ‹è¯• (`tests/integration/`)
- **ç”¨é€”**: æµ‹è¯•å¤šä¸ªç»„ä»¶ä¹‹é—´çš„äº¤äº’
- **å·¥å…·**: Jest
- **ç‰¹ç‚¹**: æµ‹è¯•APIæ¥å£ã€æ•°æ®åº“äº¤äº’ç­‰
- **è¿è¡Œ**: `npm run test:integration`

### 3. æ‰‹åŠ¨æµ‹è¯• (`tests/manual/`)
- **ç”¨é€”**: éœ€è¦äººå·¥éªŒè¯çš„æµ‹è¯•åœºæ™¯
- **å·¥å…·**: ç‹¬ç«‹è„šæœ¬
- **ç‰¹ç‚¹**: å¤æ‚åœºæ™¯ã€è°ƒè¯•ã€éªŒè¯
- **è¿è¡Œ**: `npm run test:manual`

### 4. æµ‹è¯•è„šæœ¬ (`tests/scripts/`)
- **ç”¨é€”**: æµ‹è¯•ç›¸å…³çš„å·¥å…·å’Œè¾…åŠ©è„šæœ¬
- **å·¥å…·**: Node.js
- **ç‰¹ç‚¹**: è¯Šæ–­ã€ä¿®å¤ã€æ£€æŸ¥å·¥å…·

## ğŸš€ è¿è¡Œæµ‹è¯•

### è¿è¡Œæ‰€æœ‰æµ‹è¯•
```bash
npm test
```

### è¿è¡Œç‰¹å®šç±»å‹æµ‹è¯•
```bash
# å•å…ƒæµ‹è¯•
npm run test:unit

# é›†æˆæµ‹è¯•
npm run test:integration

# æ‰‹åŠ¨æµ‹è¯•
npm run test:manual
```

### è¿è¡Œå•ä¸ªæ‰‹åŠ¨æµ‹è¯•
```bash
npm run test:manual -- --file test-chat-request.js
```

### å¸¦è¦†ç›–ç‡æµ‹è¯•
```bash
npm run test:coverage
```

## ğŸ“Š æµ‹è¯•è¦†ç›–ç‡

å½“å‰è¦†ç›–ç‡é˜ˆå€¼è®¾ç½®ä¸º20%ï¼ŒåŒ…æ‹¬ï¼š
- branches: 20%
- functions: 20%
- lines: 20%
- statements: 20%

## ğŸ”§ é…ç½®è¯´æ˜

### Jesté…ç½® (`jest.config.cjs`)
- æ”¯æŒES6æ¨¡å—
- é…ç½®äº†æµ‹è¯•å¥—ä»¶ (projects)
- è®¾ç½®äº†ä¸åŒçš„è¶…æ—¶æ—¶é—´
- æ’é™¤äº†æ‰‹åŠ¨æµ‹è¯•å’Œè„šæœ¬æ–‡ä»¶

### æµ‹è¯•è¶…æ—¶æ—¶é—´
- å•å…ƒæµ‹è¯•: 15ç§’
- é›†æˆæµ‹è¯•: 30ç§’

## ğŸ“ æ·»åŠ æ–°æµ‹è¯•

### æ·»åŠ å•å…ƒæµ‹è¯•
1. åœ¨ `tests/unit/` ç›®å½•ä¸‹åˆ›å»ºæµ‹è¯•æ–‡ä»¶
2. æ–‡ä»¶åæ ¼å¼: `*.test.js`
3. ä½¿ç”¨Jestè¯­æ³•ç¼–å†™æµ‹è¯•

### æ·»åŠ é›†æˆæµ‹è¯•
1. åœ¨ `tests/integration/` ç›®å½•ä¸‹åˆ›å»ºæµ‹è¯•æ–‡ä»¶
2. æ–‡ä»¶åæ ¼å¼: `test-*.js`
3. æµ‹è¯•APIæ¥å£æˆ–å¤æ‚äº¤äº’

### æ·»åŠ æ‰‹åŠ¨æµ‹è¯•
1. åœ¨ `tests/manual/` ç›®å½•ä¸‹åˆ›å»ºæµ‹è¯•æ–‡ä»¶
2. æ–‡ä»¶åæ ¼å¼: `test-*.js`
3. ä½¿ç”¨ç‹¬ç«‹çš„Node.jsè„šæœ¬

## ğŸ¯ æœ€ä½³å®è·µ

1. **æµ‹è¯•å‘½å**: ä½¿ç”¨æè¿°æ€§çš„æµ‹è¯•åç§°
2. **æµ‹è¯•ç»„ç»‡**: æŒ‰åŠŸèƒ½æ¨¡å—ç»„ç»‡æµ‹è¯•æ–‡ä»¶
3. **æµ‹è¯•æ•°æ®**: ä½¿ç”¨ç‹¬ç«‹çš„æµ‹è¯•æ•°æ®
4. **æ¸…ç†**: æµ‹è¯•å®Œæˆåæ¸…ç†æµ‹è¯•æ•°æ®
5. **æ–‡æ¡£**: ä¸ºå¤æ‚æµ‹è¯•æ·»åŠ æ³¨é‡Šè¯´æ˜

## ğŸ” è°ƒè¯•æµ‹è¯•

### æŸ¥çœ‹è¯¦ç»†è¾“å‡º
```bash
npm test -- --verbose
```

### è¿è¡Œç‰¹å®šæµ‹è¯•
```bash
npm test -- --testNamePattern="æµ‹è¯•åç§°"
```

### è°ƒè¯•æ¨¡å¼
```bash
npm test -- --detectOpenHandles
```

## ğŸ“ˆ æµ‹è¯•ç»Ÿè®¡

- **å•å…ƒæµ‹è¯•**: 6ä¸ªæ–‡ä»¶
- **é›†æˆæµ‹è¯•**: 16ä¸ªæ–‡ä»¶
- **æ‰‹åŠ¨æµ‹è¯•**: 13ä¸ªæ–‡ä»¶
- **æµ‹è¯•è„šæœ¬**: 5ä¸ªæ–‡ä»¶

æ€»è®¡: 40ä¸ªæµ‹è¯•æ–‡ä»¶ (å·²ä¼˜åŒ–ç»“æ„ï¼Œç§»é™¤äº†å›¾æ ‡ç”Ÿæˆç›¸å…³æµ‹è¯•) 